

  <h2 class="section-title">Demande de congé</h2>

  <div *ngIf="successMessage" class="success-message">
  {{ successMessage }}
  </div>

  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <form [formGroup]="congeForm" (ngSubmit)="onSubmit()">

  <!-- Row 1 -->
  <div class="input-row">
    <div class="form-group">
      <label>Nom :</label>
      <input formControlName="nom" />
      <div *ngIf="congeForm.get('nom')?.touched && congeForm.get('nom')?.invalid">
        Nom requis.
      </div>
    </div>

    <div class="form-group">
      <label>Matricule :</label>
      <input formControlName="matricule" />
      <div *ngIf="congeForm.get('matricule')?.touched && congeForm.get('matricule')?.invalid">
        matricule requis.
      </div>
      <div *ngIf="congeForm.get('matricule')?.touched && congeForm.get('matricule')?.errors?.['pattern']">
        Le matricule doit contenir exactement 4 chiffres.
      </div>

    </div>
  </div>

  <!-- Row 2 -->
  <div class="input-row">
    <div class="form-group">
      <label>Email :</label>
      <input formControlName="email" />
      <div *ngIf="congeForm.get('email')?.touched && congeForm.get('email')?.invalid">
        Email invalide.
      </div>
    </div>

    <div class="form-group">
      <label>Département :</label>
      <input formControlName="departement" />
    </div>
  </div>

  <!-- Row 3 -->
  <div class="input-row">
    <div class="form-group">
      <label>Catégorie :</label>
      <select formControlName="categorie">
        <option value="Ovrier">Ovrier</option>
        <option value="Cadre">Cadre</option>
        <option value="ETAM">ETAM</option>
      </select>
    </div>

    <div class="form-group">
      <label>Motif :</label>
      <select formControlName="motif">
          <option value="Décès">Décès</option>
          <option value="Naissance">Naissance</option>
          <option value="Circoncision">Circoncision</option>
          <option value="Mariage">Mariage</option>
          <option value="Congé annuel">Congé annuel</option>
          <option value="Congé sans solde">Congé sans solde</option>
          <option value="autres">autres</option>
        </select>
    </div>
  </div>

  <!-- Row 4 -->
  <div class="input-row">
    <div class="form-group">
      <label>Date Début :</label>
      <input type="date" formControlName="dateDebut" />
    </div>
    <div class="form-error" *ngIf="congeForm.errors?.['dateDebutInPast'] && congeForm.touched">
  ⚠️ La date de début ne peut pas être antérieure à aujourd'hui.
</div>

    <div class="form-group">
      <label>Date Fin :</label>
      <input type="date" formControlName="dateFin" />
    </div>
  </div>
<div class="form-error" *ngIf="congeForm.errors?.['invalidDateRange'] && congeForm.touched">
  ⚠️ La date de début ne peut pas être postérieure à la date de fin.
</div>

  <!-- Row 5 -->
  <div class="input-row">
    <div class="form-group">
      <label>Nb Jours :</label>
      <input formControlName="nbJours" />
    </div>

    <div class="form-group">
      <label>Statut :</label>
      <select formControlName="statut">
        <option value="En attente">En attente</option>
        <option value="Approuvé">Approuvé</option>
        <option value="Refusé">Refusé</option>
      </select>
    </div>
  </div>

  <!-- Commentaire full width   -->
    <div class="form-group" *ngIf="congeForm.get('motif')?.value === 'autres'">
    <label>Commentaire / autres :</label>
    <textarea formControlName="commentaire"></textarea>
  </div>

  <button type="submit">Enregistrer</button>
</form>
